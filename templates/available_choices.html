<!DOCTYPE html>
<html>
<head>
  <title>Matches</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styleavailability.css') }}">

</head>
<body>
   
  <h2>Available Users</h2>
  <ul>
    {% for user in users %}
      <li>
        <!-- Profile Photo -->
        {% if user.photo %}
          <img src="{{ url_for('static', filename='uploads/' + user.photo) }}" 
               width="80" height="80" style="border-radius:50%">
        {% else %}
          <img src="{{ url_for('static', filename='default.png') }}" 
               width="80" height="80" style="border-radius:50%">
        {% endif %}
        <br>

        <!-- User Info -->
        <b>{{ user.username }}</b> ({{ user.name }}) - Skills: {{ user.skills }} <br>
        🎓 {{ user.education or 'Not provided' }} <br>
        🔗 <a href="{{ user.linkedin }}" target="_blank">LinkedIn</a> | 
        <a href="{{ user.github }}" target="_blank">GitHub</a> <br>
        Status: {{ "Available ✅" if user.availability else "Busy ❌" }}

        <!-- <h2>Available Groups</h2> -->
        <ul>
          {% for group in groups %}
            <li>
              <b>{{ group.name }}</b> <br>
              Members: 
                {% for m in group.members %}
                  {{ m.username }}{% if not loop.last %}, {% endif %}
                {% endfor %}
              <br>
              <form method="POST" action="{{ url_for('join_group', group_id=group.id) }}">
                <button type="submit">Join Group</button>
              </form>
            </li>
          {% endfor %}
        </ul>


        <!-- Toggle Availability -->
        <form method="POST" action="{{ url_for('toggle_availability', user_id=user.id) }}" style="display:inline;">
          <button type="submit">
            {% if user.availability %}Mark Busy{% else %}Mark Available{% endif %}
          </button>
        </form>
      </li>
    {% endfor %}
  </ul>
  
</body>
</html>